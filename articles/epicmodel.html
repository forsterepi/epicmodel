<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>epicmodel • epicmodel</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="epicmodel">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">epicmodel</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/epicmodel.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/steplist.html">Steplists</a></li>
    <li><a class="dropdown-item" href="../articles/steplist_creator_tutorial.html">Steplist Creator Tutorial</a></li>
    <li><a class="dropdown-item" href="../articles/scc.html">SCC Models</a></li>
    <li><a class="dropdown-item" href="../articles/modules.html">Modules</a></li>
    <li><a class="dropdown-item" href="../articles/glossary.html">Glossary</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/forsterepi/epicmodel/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>epicmodel</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/forsterepi/epicmodel/blob/master/vignettes/epicmodel.Rmd" class="external-link"><code>vignettes/epicmodel.Rmd</code></a></small>
      <div class="d-none name"><code>epicmodel.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://forsterepi.github.io/epicmodel/">epicmodel</a></span><span class="op">)</span></span></code></pre></div>
<p>In this vignette, we describe the general workflow for
sufficient-component cause (SCC) model creation with
<code>epicmodel</code>. But first of all, if you haven’t done so, read
Rothman’s paper (Rothman 1976)!</p>
<div class="section level2">
<h2 id="task-1-create-steplist">Task 1: Create steplist<a class="anchor" aria-label="anchor" href="#task-1-create-steplist"></a>
</h2>
<p>The <strong>steplist</strong> is the input from which the SCC model
is created. The steplist contains many steps that together form the
mechanisms of outcome occurrence. These steps are basically
IF/THEN-statements and can be chained together to form mechanisms, e.g.,
<em>IF cell A produces cytokine X THEN cell B produces cytokine Y =&gt;
IF cell B produces cytokine Y THEN cell C produces cytokine Z</em>. To
learn why SCC models are based on these steps and how their exact
structure looks like, see <code><a href="../articles/steplist.html">vignette("steplist")</a></code>.</p>
<p>For the purpose of this introduction, it is enough to know that steps
need a very specific structure in order to enable automatic SCC model
creation. <code>epicmodel</code> therefore provides the <strong>Steplist
Creator <code>Shiny</code> App</strong>, which helps creating a steplist
that has the necessary structure. You can launch the <code>shiny</code>
app with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/launch_steplist_creator.html">launch_steplist_creator</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Throughout this introduction, we will use the built in
<code>steplist_rain</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">steplist</span> <span class="op">&lt;-</span> <span class="va">steplist_rain</span></span></code></pre></div>
<p><code>steplist_rain</code> is a dummy example and describes
weather-induced ways of getting wet. Let’s first inspect the steplist
using <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">steplist</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> unchecked (please run `check_steplist()` before continuing)</span></span>
<span><span class="co">#&gt; WHAT:  7  WHAT segments</span></span>
<span><span class="co">#&gt; DOES:  6  DOES segments</span></span>
<span><span class="co">#&gt; WHERE:  3  WHERE segments</span></span>
<span><span class="co">#&gt; MODULE:  3  modules</span></span>
<span><span class="co">#&gt; STEP:  10  STEPs</span></span>
<span><span class="co">#&gt; ICC:  0  incompatible component-cause pairs</span></span>
<span><span class="co">#&gt; OUTCOME:  1  outcome definition</span></span></code></pre></div>
<p>Print tells us what the steplist contains. Again, see
<code><a href="../articles/steplist.html">vignette("steplist")</a></code> to find out what all these different
elements are.</p>
<p>You can see two important things. First, the steplist contains only
10 steps, which shows that it’s probably not a realistic example.
Second, the first line tells you that the steplist is “unchecked” and
asks you to run <code><a href="../reference/check_steplist.html">check_steplist()</a></code>.
<code><a href="../reference/check_steplist.html">check_steplist()</a></code> ensures that the steplist’s structure is
fine for SCC model creation.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">steplist_checked</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_steplist.html">check_steplist</a></span><span class="op">(</span><span class="va">steplist</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Checking </span><span style="font-weight: bold; font-style: italic;">epicmodel_steplist</span><span style="font-weight: bold;"> steplist</span> <span style="color: #00BBBB;">────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking WHAT IDs was successful.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking DOES IDs was successful.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking WHERE IDs was successful.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking Module IDs was successful.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking ICC IDs was successful.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking WHAT keywords was successful.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking DOES keywords was successful.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking WHERE keywords was successful.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking Module keywords was successful.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking Modules was successful.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking ICC entries was successful.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking WHAT segments was successful.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking DOES segments was successful.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking WHERE segments was successful.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking references was successful.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking start/end steps was successful.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking THEN statements was successful.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking THEN/IF/IFNOT equality was successful.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking outcome definitions was successful.</span></span>
<span><span class="co">#&gt; ── Summary ─────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking successful!</span></span></code></pre></div>
<p>You can see from the output that <code><a href="../reference/check_steplist.html">check_steplist()</a></code>
conducts many checks. See the function documentation for a detailed
description. In our case, all checks have been successful and therefore
our steplist is now “checked”. When running <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> again,
you will see a confirmation.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">steplist_checked</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> checked successfully</span></span>
<span><span class="co">#&gt; WHAT:  7  WHAT segments</span></span>
<span><span class="co">#&gt; DOES:  6  DOES segments</span></span>
<span><span class="co">#&gt; WHERE:  3  WHERE segments</span></span>
<span><span class="co">#&gt; MODULE:  3  modules</span></span>
<span><span class="co">#&gt; STEP:  10  STEPs</span></span>
<span><span class="co">#&gt; ICC:  0  incompatible component-cause pairs</span></span>
<span><span class="co">#&gt; OUTCOME:  1  outcome definition</span></span></code></pre></div>
<p>With a checked steplist, you can also use <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> and
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>. Let’s start with <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">steplist_checked</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Outcome Definitions</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • you get wet</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Component causes</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • no vacation</span></span>
<span><span class="co">#&gt; • weekday</span></span>
<span><span class="co">#&gt; • rain</span></span>
<span><span class="co">#&gt; • get groceries</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Interventions</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • take vacation</span></span>
<span><span class="co">#&gt; • take umbrella</span></span>
<span><span class="co">#&gt; • work from home</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">End steps</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • you get wet</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Other steps</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • walk to work</span></span>
<span><span class="co">#&gt; • go outside</span></span></code></pre></div>
<p>The output contains the outcome definition as well as all the steps
split into different types: Component causes, Interventions, End steps,
and Other steps. <code><a href="../articles/steplist.html">vignette("steplist")</a></code> will tell you more
about these different types of steps. Now, let’s try
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">steplist_checked</span><span class="op">)</span></span></code></pre></div>
<p><img src="img%2Fepicmodel_plot_steplist_checked.png" width="70%"></p>
<pre><code><span><span class="co">#&gt;    Label   Module           Step</span></span>
<span><span class="co">#&gt; 1    CC1 activity    no vacation</span></span>
<span><span class="co">#&gt; 2    CC2     fate        weekday</span></span>
<span><span class="co">#&gt; 3    CC3  weather           rain</span></span>
<span><span class="co">#&gt; 4    CC4 activity  get groceries</span></span>
<span><span class="co">#&gt; 5     I1 activity  take vacation</span></span>
<span><span class="co">#&gt; 6     I2 activity  take umbrella</span></span>
<span><span class="co">#&gt; 7     I3 activity work from home</span></span>
<span><span class="co">#&gt; 8     S1 activity   walk to work</span></span>
<span><span class="co">#&gt; 9     S2 activity     go outside</span></span>
<span><span class="co">#&gt; 10    E1  weather    you get wet</span></span></code></pre>
<p><code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> shows you how your steps are chained together.
The graph is created using the <code>DiagrammeR</code> package. The
legend shown below the graph links the node labels to your steps and
tells you to which <strong>module</strong> a step belongs. Steps that
belong together can be grouped into modules when creating the steplist.
The node colors in the graph, e.g., depend on the step’s module. See
<code><a href="../articles/modules.html">vignette("modules")</a></code> to learn more. Later, we will see
similar mechanisms for every sufficient cause.</p>
</div>
<div class="section level2">
<h2 id="task-2-create-scc-model-from-steplist">Task 2: Create SCC model from steplist<a class="anchor" aria-label="anchor" href="#task-2-create-scc-model-from-steplist"></a>
</h2>
<p>But first, we need to actually create the SCC model. This is done by
function <code><a href="../reference/create_scc.html">create_scc()</a></code>. See the function documentation to
learn more about the applied algorithm. It only has a single input: the
checked steplist.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">scc_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_scc.html">create_scc</a></span><span class="op">(</span><span class="va">steplist_checked</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Create SCC Model</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> 15/15 | Check if set of component causes is sufficient</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> 5/5 | Check if sufficiency dependends on IFNOT conditions</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> 5/5 | Check if sufficient cause is minimal</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> 2/5 sufficient causes are minimal</span></span></code></pre></div>
<p>As our steplist is very small, SCC model creation is fast. However,
with realistic steplists, <code><a href="../reference/create_scc.html">create_scc()</a></code> can take some time
because it evaluates every possible combination of component causes.
From the output we see that 15 sets of component causes have been
checked. When running <code>summary(steplist_checked)</code> before, we
saw that there are 4 component causes. Because every one of them can be
present or absent, we have <code>2 ^ 4 = 16</code> combinations. Of
course, there’s no need to evaluate the set where all component causes
are absent, which leaves us with 15 combinations. We can further see
that 5 of these 15 combinations were sufficient, i.e., fulfilled the
outcome definition. We ignore the “Check if sufficiency depends on IFNOT
conditions” for this introduction, but you can learn more from
<code><a href="../articles/scc.html">vignette("scc")</a></code>. Finally, we see that 2 out of the 5
sufficient causes are minimal. For a set of component causes to form a
sufficient cause, it needs to be minimally sufficient, i.e., if you
would remove any of its component causes, the remaining ones would not
be sufficient anymore. In our example, you will see shortly that
component causes “rain” and “get groceries” are sufficient to “get wet”.
If it would not be raining or if you would not go outside to get
groceries, you would not get wet. Therefore, it is minimally sufficient.
If you add another component cause, e.g., it’s a “weekday”, to the set,
it would of course still lead to the outcome but it would not be
minimally sufficient anymore. Now, let’s inspect our SCC model using
<code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> or <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>, which are identical for
SCC models.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">scc_model</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Outcome Definitions</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • you get wet</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">SC 1</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Always sufficient</span></span>
<span><span class="co">#&gt; Component causes:</span></span>
<span><span class="co">#&gt; • rain</span></span>
<span><span class="co">#&gt; • get groceries</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Modules</span></span>
<span><span class="co">#&gt; • activity: 50% (2/4)</span></span>
<span><span class="co">#&gt; • weather: 50% (2/4)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">SC 2</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Always sufficient</span></span>
<span><span class="co">#&gt; Component causes:</span></span>
<span><span class="co">#&gt; • no vacation</span></span>
<span><span class="co">#&gt; • weekday</span></span>
<span><span class="co">#&gt; • rain</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Modules</span></span>
<span><span class="co">#&gt; • activity: 50% (3/6)</span></span>
<span><span class="co">#&gt; • weather: 33% (2/6)</span></span>
<span><span class="co">#&gt; • fate: 17% (1/6)</span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
<p>In the output, we are first reminded of our outcome definition before
the sufficient causes (SC) are listed. As we saw before, there are two
of them: SC 1 &amp; SC 2. Both sufficient causes are reported to be
“Always sufficient”. This refers to their <strong>sufficiency
status</strong>. Due to the structure of steplists, it is possible that
sets of component causes are sufficient, i.e., lead to the outcome, only
under some specific circumstances. To learn more, see
<code><a href="../articles/scc.html">vignette("scc")</a></code>. This is, however, not the case here. Based
on our steplist, both sets of component causes, i.e. “rain” &amp; “get
groceries”, as well as “no vacation” &amp; “weekday” &amp; “rain” are
always sufficient to cause outcome “you get wet”. Modules also make an
appearance here. Again, see <code><a href="../articles/modules.html">vignette("modules")</a></code> to learn
more.</p>
</div>
<div class="section level2">
<h2 id="task-3-use-scc-model">Task 3: Use SCC model<a class="anchor" aria-label="anchor" href="#task-3-use-scc-model"></a>
</h2>
<p>Learning about sufficient causes is interesting, but we can do a lot
more with our SCC model.</p>
<div class="section level3">
<h3 id="causal-pies">Causal pies<a class="anchor" aria-label="anchor" href="#causal-pies"></a>
</h3>
<p>First, of course, we want to see some causal pies, for which we can
simple use <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>. You’ll notice that we additionally
specified <code>unknown = FALSE</code>. This argument controls if
unknown causes are included in the plot. To learn more about unknown
causes, see <code><a href="../articles/scc.html">vignette("scc")</a></code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">scc_model</span>, unknown <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="img%2Fepicmodel_plot_scc.png" width="70%"></p>
</div>
<div class="section level3">
<h3 id="standardized-effect-size">Standardized effect size<a class="anchor" aria-label="anchor" href="#standardized-effect-size"></a>
</h3>
<p>In epidemiology, we usually calculate risk ratios or odds ratios to
estimate the strength of the effect of the exposure on the outcome. We
learn from SCC models, however, that these effect sizes are no natural
constants but that their value depends on the population under study.
<code>epicmodel</code> offers a function to derive a
<strong>standardized effect estimate</strong> from the SCC model. Let’s
look at the output to explore how it works.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/effect_size.html">effect_size</a></span><span class="op">(</span><span class="va">scc_model</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> 4/4 | Check impact of every component cause</span></span>
<span><span class="co">#&gt;                        Component Cause                  Impact</span></span>
<span><span class="co">#&gt; 1                                 rain necessary [5/8 vs. 0/8]</span></span>
<span><span class="co">#&gt; 2                        get groceries      4.00 [4/8 vs. 1/8]</span></span>
<span><span class="co">#&gt; 3 IFNOT take vacation THEN no vacation      1.50 [3/8 vs. 2/8]</span></span>
<span><span class="co">#&gt; 4                              weekday      1.50 [3/8 vs. 2/8]</span></span></code></pre></div>
<p>From the output, we see that <code>epicmodel</code> calculates a
value for each component cause. To do this, it lists all possible sets
of component causes (there are 16 of them as we already calculated),
splits them into the half where the component cause of interest is
present and the half where the component cause of interest is absent,
and records the sets that would cause the outcome for each half. Let’s
look, e.g., at the square brackets <code>[]</code> for “get groceries”:
The first part records sets with “get groceries” present and 4 of the 8
lead to the outcome. The second part records sets without “get
groceries” and only 1 of the 8 leads to the outcome. The number in front
is simply the ratio of these two fractions. You can see that the
standardized effect size for “get groceries” with 4.00 is higher than
for “no vacation” or “weekday” with 1.50, which makes sense because “get
groceries” only needs “rain” to be sufficient, while “no vacation” and
“weekday” need “rain” as well as each other. “rain” is marked as a
necessary cause because none of the 8 sets of component causes that do
not include “rain” lead to outcome occurrence.</p>
</div>
<div class="section level3">
<h3 id="mechanisms">Mechanisms<a class="anchor" aria-label="anchor" href="#mechanisms"></a>
</h3>
<p>When printing our SCC model, we saw that “no vacation”, “weekday”,
and “rain” together formed a sufficient cause. Maybe you wondered, how
the three of them would cause “you get wet”? We can explore further by
inspecting the <strong>mechanisms</strong>. We already saw the complete
one when plotting our steplist. Using <code><a href="../reference/mechanism.html">mechanism()</a></code>, we can
split them up by sufficient cause. Using <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>, produces
one graph for every sufficient cause. using <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>
provides us with the legend we already know from earlier. Graphs can be
downloaded with <code><a href="../reference/export_mechanism.html">export_mechanism()</a></code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mech</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mechanism.html">mechanism</a></span><span class="op">(</span><span class="va">scc_model</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mech</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mech</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;  Label Module   Step          </span></span>
<span><span class="co">#&gt;  CC1   activity no vacation   </span></span>
<span><span class="co">#&gt;  CC2   fate     weekday       </span></span>
<span><span class="co">#&gt;  CC3   weather  rain          </span></span>
<span><span class="co">#&gt;  CC4   activity get groceries </span></span>
<span><span class="co">#&gt;  I1    activity take vacation </span></span>
<span><span class="co">#&gt;  I2    activity take umbrella </span></span>
<span><span class="co">#&gt;  I3    activity work from home</span></span>
<span><span class="co">#&gt;  S1    activity walk to work  </span></span>
<span><span class="co">#&gt;  S2    activity go outside    </span></span>
<span><span class="co">#&gt;  E1    weather  you get wet</span></span></code></pre>
<p><img src="img%2Fepicmodel_plot_mechanism1.png" width="70%"><img src="img%2Fepicmodel_plot_mechanism2.png" width="70%"></p>
</div>
<div class="section level3">
<h3 id="interventions">Interventions<a class="anchor" aria-label="anchor" href="#interventions"></a>
</h3>
<p>Let’s take another look at our steplist summary:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">steplist_checked</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Outcome Definitions</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • you get wet</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Component causes</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • no vacation</span></span>
<span><span class="co">#&gt; • weekday</span></span>
<span><span class="co">#&gt; • rain</span></span>
<span><span class="co">#&gt; • get groceries</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Interventions</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • take vacation</span></span>
<span><span class="co">#&gt; • take umbrella</span></span>
<span><span class="co">#&gt; • work from home</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">End steps</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • you get wet</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Other steps</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • walk to work</span></span>
<span><span class="co">#&gt; • go outside</span></span></code></pre></div>
<p>You can see that three steps are listed as
<strong>interventions</strong>, “take vacation”, “take umbrella”, and
“work from home”. For now, we don’t need to now, how interventions are
defined exactly (again, see <code><a href="../articles/steplist.html">vignette("steplist")</a></code> for the
details), but from their names we can see that they are actions which
might prevent the outcome. <code>epicmodel</code> can investigate their
impact based on your SCC model. In general, there are two directions
such an investigation can take:</p>
<ul>
<li>Which sufficient causes can be prevented by a given
intervention?</li>
<li>Which intervention prevents the outcome for an individual with a
given set of component causes?</li>
</ul>
<p>Let’s investigate first, which sufficient causes can be prevented by
intervention “work from home”. We specify <code>"all"</code> for
argument <code>causes</code> and <code>"THENd4e1"</code>, i.e., the step
ID for intervention “work from home”, for argument
<code>intervention</code>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/intervene.html">intervene</a></span><span class="op">(</span><span class="va">scc_model</span>, causes <span class="op">=</span> <span class="st">"all"</span>, intervention <span class="op">=</span> <span class="st">"THENd4e1"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Intervention</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Cause Set 1</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • rain</span></span>
<span><span class="co">#&gt; • get groceries</span></span>
<span><span class="co">#&gt; Status without intervention</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Always sufficient</span></span>
<span><span class="co">#&gt; Status with intervention</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> No considered intervention is able to prevent the outcome</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Cause Set 2</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • no vacation</span></span>
<span><span class="co">#&gt; • weekday</span></span>
<span><span class="co">#&gt; • rain</span></span>
<span><span class="co">#&gt; Status without intervention</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Always sufficient</span></span>
<span><span class="co">#&gt; Status with intervention</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Complete prevention by the following minimal intervention sets</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Intervention Set 1</span></span>
<span><span class="co">#&gt; • work from home</span></span></code></pre></div>
<p>In the output, we get a comparison of the status without and with
intervention for each sufficient cause. For Cause Set 1, it is reported
that “No considered intervention is able to prevent the outcome”, but
for Cause Set 2, there is complete prevention by intervention set “work
from home”.</p>
<p>Now, let’s imagine you are in the following situation: it’s raining,
it’s a weekday, you have vacation, but want to get some groceries, i.e.,
<code>c("THENa1","THENa5","THENd2a3")</code> in step IDs. Since you are
open to all suggestions, let’s specify <code>"all"</code> for argument
<code>intervention</code>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/intervene.html">intervene</a></span><span class="op">(</span><span class="va">scc_model</span>, causes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"THENa1"</span>,<span class="st">"THENa5"</span>,<span class="st">"THENd2a3"</span><span class="op">)</span>, intervention <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Intervention</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Cause Set 1</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • weekday</span></span>
<span><span class="co">#&gt; • rain</span></span>
<span><span class="co">#&gt; • get groceries</span></span>
<span><span class="co">#&gt; Status without intervention</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Always sufficient</span></span>
<span><span class="co">#&gt; Status with intervention</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Complete prevention by the following minimal intervention sets</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Intervention Set 1</span></span>
<span><span class="co">#&gt; • take umbrella</span></span></code></pre></div>
<p>Surprise, you can completely prevent getting wet by taking an
umbrella! Please note that <code>epicmodel</code> reports only minimal
intervention sets. You could, e.g., additionally work from home (even
though it doesn’t really make sense in this example) and still prevent
getting wet. However, you only need to take the umbrella. For a better
example, consider the following situation: it’s raining, it’s a weekday,
you don’t have vacation, and you don’t have an umbrella. We can look at
this scenario with:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/intervene.html">intervene</a></span><span class="op">(</span><span class="va">scc_model</span>, causes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"IFNOTd6a6THENd5a6"</span>,<span class="st">"THENa5"</span>,<span class="st">"THENa1"</span><span class="op">)</span>, intervention <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"THENd6a6"</span>,<span class="st">"THENd4e1"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Intervention</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Cause Set 1</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • no vacation</span></span>
<span><span class="co">#&gt; • weekday</span></span>
<span><span class="co">#&gt; • rain</span></span>
<span><span class="co">#&gt; Status without intervention</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Always sufficient</span></span>
<span><span class="co">#&gt; Status with intervention</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Complete prevention by the following minimal intervention sets</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Intervention Set 1</span></span>
<span><span class="co">#&gt; • work from home</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Intervention Set 2</span></span>
<span><span class="co">#&gt; • take vacation</span></span></code></pre></div>
<p>The output shows that, to prevent the outcome, you can either work
from home or take vacation. Both together would work as well, of course,
but again, this intervention set is not minimal.</p>
</div>
<div class="section level3">
<h3 id="dags">DAGs<a class="anchor" aria-label="anchor" href="#dags"></a>
</h3>
<p>Finally, <code>epicmodel</code> can transform SCC models to directed
acyclic graphs (DAGs) following VanderWeele &amp; Robins (2007).</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dag</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scc_to_dag.html">scc_to_dag</a></span><span class="op">(</span><span class="va">scc_model</span><span class="op">)</span></span>
<span><span class="va">dag</span><span class="op">$</span><span class="va">dag</span></span>
<span><span class="co">#&gt; dag {</span></span>
<span><span class="co">#&gt; CC1 [pos="1.000,0.250"]</span></span>
<span><span class="co">#&gt; CC2 [pos="1.000,0.750"]</span></span>
<span><span class="co">#&gt; CC3 [pos="1.000,1.250"]</span></span>
<span><span class="co">#&gt; CC4 [pos="1.000,1.750"]</span></span>
<span><span class="co">#&gt; O [outcome,pos="4.000,1.000"]</span></span>
<span><span class="co">#&gt; SC1 [pos="3.000,0.000"]</span></span>
<span><span class="co">#&gt; SC2 [pos="3.000,1.000"]</span></span>
<span><span class="co">#&gt; USC [pos="3.000,2.000"]</span></span>
<span><span class="co">#&gt; U_SC1 [pos="2.000,0.000"]</span></span>
<span><span class="co">#&gt; U_SC2 [pos="2.000,1.000"]</span></span>
<span><span class="co">#&gt; U_USC [pos="2.000,2.000"]</span></span>
<span><span class="co">#&gt; CC1 -&gt; SC1</span></span>
<span><span class="co">#&gt; CC1 -&gt; SC2</span></span>
<span><span class="co">#&gt; CC2 -&gt; SC1</span></span>
<span><span class="co">#&gt; CC3 -&gt; SC2</span></span>
<span><span class="co">#&gt; CC4 -&gt; SC2</span></span>
<span><span class="co">#&gt; SC1 -&gt; O</span></span>
<span><span class="co">#&gt; SC2 -&gt; O</span></span>
<span><span class="co">#&gt; USC -&gt; O</span></span>
<span><span class="co">#&gt; U_SC1 -&gt; SC1</span></span>
<span><span class="co">#&gt; U_SC2 -&gt; SC2</span></span>
<span><span class="co">#&gt; U_USC -&gt; USC</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
<p>Element <code>dag</code> of the output contains a
<code>dagitty</code> object thanks to the <code>dagitty</code> package.
Printing it prints its <code>dagitty</code> model code, which, e.g., can
be pasted to DAGitty online on <a href="https://www.dagitty.net" class="external-link uri">https://www.dagitty.net</a> for further processing. You can
also plot <code>dagitty</code> objects with <code>epicmodel</code>’s
<code><a href="../reference/plot_dag.html">plot_dag()</a></code> function, which tries to mimic DAGitty’s online
layout in a <code>ggplot</code> object.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_dag.html">plot_dag</a></span><span class="op">(</span><span class="va">dag</span><span class="op">$</span><span class="va">dag</span><span class="op">)</span></span></code></pre></div>
<p><img src="img%2Fepicmodel_plot_dag.png" width="70%"></p>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li>Rothman KJ (1976): <em>Causes</em>. American Journal of Epidemiology
104(6):587-592.</li>
<li>VanderWeele TJ, Robins JM (2007): <em>Directed acyclic graphs,
sufficient causes, and the properties of conditioning on a common
effect.</em> American Journal of Epidemiology 166 (9): 1096–1104.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Felix Forster.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
